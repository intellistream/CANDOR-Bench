[pytest]
# pytest configuration for SAGE-DB-Bench (config/ directory)

# Test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Only collect tests from the top-level tests/ directory
# (config/ is not the root of tests)
testpaths =
    ../tests

# Ensure project package is importable (src is four levels up from here)
pythonpath =
    ../../../../

# Exclude third-party algorithm implementations from collection
norecursedirs =
    .git
    build
    dist
    *.egg-info
    __pycache__
    algorithms_impl
    DiskANN
    diskann-ms
    faiss
    ipdiskann
    vsag
    SPTAG
    plsh
    gti
    extern
    third_party
    vendors

# Additional options
addopts =
    -v
    --tb=short
    --strict-markers
    # Explicitly ignore algorithm implementation directories
    --ignore=../algorithms_impl/
    --ignore-glob=**/algorithms_impl/**/test_*.py
    --ignore-glob=**/DiskANN/**/test_*.py
    --ignore-glob=**/diskann-ms/**/test_*.py
    --ignore-glob=**/faiss/**/test_*.py

# Markers
markers =
    unit: Unit tests for SAGE-DB-Bench
    integration: Integration tests
    third_party: Third-party algorithm tests (skipped by default)
    algorithm_impl: Algorithm implementation tests
    slow: Slow running tests

# Timeout
timeout = 300

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
